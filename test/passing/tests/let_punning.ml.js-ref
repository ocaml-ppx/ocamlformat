let ( let* ) x f = f x
let ( and* ) a b = a, b

let x = 1
and y = 2
and z = 3

let p =
  let* x
  and* y
  and* z in
  x, y, z
;;

let q =
  let%foo x
  and y
  and z in
  x, y, z
;;

let p =
  let* x
  and* y
  and* z in
  x, y, z
;;

let q =
  let%foo x
  and y
  and z in
  x, y, z
;;

let p =
  let* x
  and* y = z in
  x, y
;;

let q =
  let%foo x
  and y = z in
  x, y
;;

let p =
  let* x = y
  and* z in
  x, z
;;

let q =
  let%foo x = y
  and z in
  x, z
;;

(* Comments *)

let r =
  let* (* 11111 *) w in
  let* x (* 22222 *) in
  let* y (* 33333 *) in
  let* z (* 44444 *) in
  let*
    (* 55555 *)
    (* 66666 *) x
    (* 77777 *)
    (* 88888 *)
    (* 99999 *)
    (* 00000 *)
  in
  let* (* 1111111111 *) x
  and* (* 2222222222 *) y
  and* z (* 3333333333 *)
  and* w (* 4444444444 *)
  and* q (* 5555555555 *) in
  (* 6666666666 *)
  x + y + z + w + q
;;

let r =
  let%foo (* 11111 *) w in
  let%bar x (* 22222 *) in
  let%baz y (* 33333 *) in
  let%foo z (* 44444 *) in
  let%bar
    (* 55555 *)
    (* 66666 *) x
    (* 77777 *)
    (* 88888 *)
    (* 99999 *)
    (* 00000 *)
  in
  let%baz (* 1111111111 *) x
  and (* 2222222222 *) y
  and z (* 3333333333 *)
  and w (* 4444444444 *)
  and q (* 5555555555 *) in
  (* 6666666666 *)
  x + y + z + w + q
;;

(* Non-standard syntax *)

let s =
  [%bar
    let x = x
    and y = y in
    ()]
;;

(* Is it a pun??? *)

let t =
  let x = x in
  ()
;;

let u =
  let%foo x y = x in
  ()
;;

let v =
  let%foo (x [@bar]) = x
  and y = y [@baz] in
  ()
;;
