;; Build the stage1 version of Menhir. During this stage, Menhir's parser
;; is generated by ocamlyacc.

(ocamlyacc parser)

;; As dune cannot use the same OCaml module in two different libraries or
;; executables, we must copy the source files to the present directory.

(copy_files# ../*.{ml,mli})

;; The stage1 version of Menhir. This executable is later used to build the
;; stage2 version of Menhir.

(executable
  (name main)
  (libraries unix fix menhirLib menhirSdk)
  (flags :standard -open MenhirSdk)
)
