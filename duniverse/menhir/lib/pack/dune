;; The helper script pack.ml generates menhirLib.{ml,mli}
;; by concatenating the modules listed in menhirLib.mlpack.

(executable
  (name pack)
  (modules pack)
)

(rule
  (targets menhirLib.ml menhirLib.mli)
  (deps (glob_files ../*.{ml,mli}) menhirLib.mlpack)
  (action (run ./pack.exe))
)

;; We can then compile MenhirLib from menhirLib.{ml,mli}
;; in this directory.

(library
  (name menhirLib)
  (public_name menhirLib)
  (synopsis "Runtime support for code generated by Menhir")
  (modules menhirLib)
)
